(this["webpackJsonpnotes-front"]=this["webpackJsonpnotes-front"]||[]).push([[0],{37:function(e,t,a){e.exports={modal:"Modal_modal__FAbuc"}},42:function(e,t,a){},84:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(35),r=a.n(s),o=(a(42),a(3)),l=a(8),i=Object(n.createContext)({auth:null,login:function(){},logout:function(){}});i.displayName="AuthContext";var d=i;function u(){var e=Object(n.useContext)(d);return[e.auth,function(t){t?(e.login(t),window.localStorage.setItem("user-auth",JSON.stringify(t)),setTimeout((function(){e.logout()}),36e5)):(e.logout(),window.localStorage.removeItem("user-auth"))}]}var j=a(19),b=a.n(j);function h(e){var t=e.title,a=e.message,n=e.type;return j.store.addNotification({title:t,message:a,type:n,insert:"top",container:"bottom-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3500,onScreen:!0,showIcon:!0}})}var m=a(0);var p=function(){var e=u(),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(m.jsx)("div",{className:"p-3 shadow-sm text-light bg-dark",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row align-items-center",children:[Object(m.jsx)("div",{className:"col-4 col-md-6 p-0",children:Object(m.jsxs)(l.b,{to:"/",className:"text-light text-decoration-none",children:[Object(m.jsx)("span",{children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-stickies",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M1.5 0A1.5 1.5 0 0 0 0 1.5V13a1 1 0 0 0 1 1V1.5a.5.5 0 0 1 .5-.5H14a1 1 0 0 0-1-1H1.5z"}),Object(m.jsx)("path",{d:"M3.5 2A1.5 1.5 0 0 0 2 3.5v11A1.5 1.5 0 0 0 3.5 16h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 16 9.586V3.5A1.5 1.5 0 0 0 14.5 2h-11zM3 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5V9h-4.5A1.5 1.5 0 0 0 9 10.5V15H3.5a.5.5 0 0 1-.5-.5v-11zm7 11.293V10.5a.5.5 0 0 1 .5-.5h4.293L10 14.793z"})]})}),Object(m.jsx)("span",{className:"ms-2",children:"Notatnik"})]})}),Object(m.jsx)("div",{className:"text-end col-8 col-md-6 p-0",children:a?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.b,{to:"/profile",className:"me-3 text-light",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",className:"bi bi-person-fill",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})})}),Object(m.jsx)("button",{onClick:function(){h({title:"U\u017cytkownik zosta\u0142 wylogowany",message:"zapraszamy ponownie",type:"warning"}),n(null)},className:"btn btn-warning",children:"Wyloguj"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.b,{to:"/login",className:"btn btn-warning",children:"Zaloguj"}),Object(m.jsx)(l.b,{to:"/register",className:"btn ms-2 btn-primary",children:"Zarejestruj"})]})})]})})})},v=a(10),O=a(5),x=a.n(O),g=a(1),f=a(14),w=a(7),N=a(20),y=a.n(N),k=y.a.create({baseURL:"https://notes-q-default-rtdb.firebaseio.com"}),z=Object(n.createContext)({state:{},dispatch:function(){}});function C(e){switch(e.type){case"text":return Object(m.jsx)(M,Object(g.a)({},e));case"textarea":return Object(m.jsx)(T,Object(g.a)({},e));case"password":return Object(m.jsx)(A,Object(g.a)({},e));case"email":return Object(m.jsx)(I,Object(g.a)({},e));case"color":return Object(m.jsx)(_,Object(g.a)({},e));case"checkbox":return Object(m.jsx)(S,Object(g.a)({},e))}}var M=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"noteTitle",className:"form-label",children:e.label}),Object(m.jsx)("input",{ref:e.ref,autoComplete:"off",placeholder:e.placeholder,type:e.type,className:"form-control ".concat(e.validation?"is-invalid":null," "),id:e.id,"aria-describedby":e.id,value:e.value,onChange:function(t){return e.onChange(t.target.value)}}),Object(m.jsx)("div",{className:"invalid-feedback",children:e.validation})]})},I=function(e){var t;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"noteTitle",className:"form-label",children:e.label}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("span",{className:"input-group-text",id:e.id,children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",className:"bi bi-envelope-fill",viewBox:"0 0 18 18",children:Object(m.jsx)("path",{d:"M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"})})}),Object(m.jsx)("input",{autoComplete:"off",placeholder:null!==(t=e.placeholder)&&void 0!==t?t:"name@example.pl",type:e.type,className:"form-control ".concat(e.validation?"is-invalid":null," "),id:e.id,"aria-describedby":e.id,value:e.value,onChange:function(t){return e.onChange(t.target.value)}}),Object(m.jsx)("div",{className:"invalid-feedback",children:e.validation})]})]})},A=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"noteTitle",className:"form-label",children:e.label}),Object(m.jsxs)("div",{className:"input-group mb-3",children:[Object(m.jsx)("span",{className:"input-group-text",id:"ico-form-password",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",className:"bi bi-lock-fill",viewBox:"0 0 18 18",children:Object(m.jsx)("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"})})}),Object(m.jsx)("input",{ref:e.ref,autoComplete:"off",placeholder:"has\u0142o",type:e.type,className:"form-control ".concat(e.validation?"is-invalid":null," "),id:e.id,"aria-describedby":e.id,"aria-label":"password",value:e.value,onChange:function(t){return e.onChange(t.target.value)}}),Object(m.jsx)("div",{className:"invalid-feedback",children:e.validation})]})]})},S=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"form-check",children:[Object(m.jsx)("input",{type:e.type,className:"form-check-input ".concat(e.validation?"is-invalid":null," "),id:e.id,"aria-describedby":e.id,checked:e.value,onChange:function(t){return e.onChange(t.target.checked)}}),Object(m.jsx)("label",{htmlFor:e.id,className:"form-check-label",children:e.label}),Object(m.jsx)("div",{className:"invalid-feedback",children:e.validation})]})})},T=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{className:"form-label",children:e.label}),Object(m.jsx)("textarea",{className:"form-control ".concat(e.validation?"is-invalid":null," "),cols:"30",rows:"5",value:e.value,onChange:function(t){return e.onChange(t.target.value)}}),Object(m.jsx)("div",{className:"invalid-feedback",children:e.validation})]})},_=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{className:"form-label",children:e.label}),Object(m.jsx)("input",{type:e.type,label:e.label,title:e.title,value:e.value,className:"form-control p-1",style:{width:"40px",height:"30px"},onChange:function(t){return e.onChange(t.target.value)}})]})};var E={required:function(e){return e?"":"Pole wymagane!"},length:function(e,t){return e.length<t.length?"minimalna ilo\u015b\u0107 znak\xf3w to: ".concat(t.length):""},email:function(e){return function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(e)?"":"Niepoprawny mail"},password:function(e){return e.length<=5?"Minimalna ilo\u015b\u0107 znak\xf3w to 6":""},changePassword:function(e){return 0===e.length||e.length>5?"":"Minimalna ilo\u015b\u0107 znak\xf3w to 6"},checkbox:function(e){return e?"":"Akceptacja regulaminu jest wymagana"}};function L(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=0;a<e.length;a++){var n=e[a];if(n instanceof Object){var c=E[n.rule](t,n);if(c)return c}else{var s=E[n](t);if(s)return s}}return""}var F=a(37),H=a.n(F);var D=function(e){return Object(m.jsx)("div",{className:"".concat(H.a.modal),style:{backdropFilter:"blur(4px)"},children:Object(m.jsx)("div",{className:"container",children:e.children})})};var P=function(e){var t=Object(n.useContext)(z),a=u(),c=Object(o.a)(a,2),s=c[0],r=c[1],l=Object(n.useState)({title:{value:t.state.currentNote[0].title,errorMessage:"",rules:["required",{rule:"length",length:6}],validation:!0},description:{value:t.state.currentNote[0].body,rules:["required"],errorMessage:"",validation:!0},bgColor:{value:t.state.currentNote[0].bgColor,errorMessage:"",validation:!0},textColor:{value:t.state.currentNote[0].textColor,errorMessage:"",validation:!0}}),i=Object(o.a)(l,2),d=i[0],j=i[1],b=0!==Object.values(d).filter((function(e){return!e.validation})).length,p=function(){var e=Object(w.a)(x.a.mark((function e(a){var n,c,o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={title:d.title.value,body:d.description.value,textColor:d.textColor.value,bgColor:d.bgColor.value},c=t.state.currentNote[0]._id,o=Object(f.a)(t.state.notes),l=o.findIndex((function(e){return e._id===c})),o[l]=Object(g.a)(Object(g.a)({},n),{},{_id:c}),t.dispatch({type:"showEditModal",showEditModal:!1}),t.dispatch({type:"updateNote",notes:o}),t.dispatch({type:"searchHandler"}),e.prev=9,e.next=12,k.patch("/".concat(s.localId,"/").concat(c,".json?auth=").concat(s.idToken),n);case 12:h({title:"Notatka zosta\u0142a zaktualizowana",message:" ",type:"info"}),e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(9),h({title:"Sesja wygas\u0142a!",message:"Aby edytowa\u0107 notatk\u0119 prosz\u0119 si\u0119 zalogowa\u0107",type:"danger"}),e.abrupt("return",r(null));case 21:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){var a=L(d[t].rules,e);j(Object(g.a)(Object(g.a)({},d),{},Object(v.a)({},t,Object(g.a)(Object(g.a)({},d[t]),{},{value:e,errorMessage:a,validation:!a}))))};return Object(m.jsx)(D,{children:Object(m.jsx)("div",{className:"my-4",children:Object(m.jsx)("div",{className:"row justify-content-center",children:Object(m.jsxs)("div",{className:"card bg-light text-dark col-sm-8 p-0",children:[Object(m.jsx)("div",{className:"card-header",children:"Edytuj notatk\u0119"}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("form",{onSubmit:p,children:[Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"Tytu\u0142",type:"text",id:"noteTitle",validation:d.title.errorMessage,value:d.title.value,onChange:function(e){return O(e,"title")}})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(C,{label:"Notatka",type:"textarea",validation:d.description.errorMessage,value:d.description.value,onChange:function(e){return O(e,"description")}})}),Object(m.jsxs)("div",{className:"row align-items-center",children:[Object(m.jsx)("div",{className:"col-6 col-lg-4",children:Object(m.jsx)(C,{type:"color",label:"Kolor notatki",title:"Wybierz kolor",value:d.bgColor.value,onChange:function(e){return O(e,"bgColor")},className:"form-control p-1",style:{width:"50px"}})}),Object(m.jsx)("div",{className:"col-6 col-lg-4",children:Object(m.jsx)(C,{type:"color",label:"Kolor tekstu",title:"Wybierz kolor",value:d.textColor.value,onChange:function(e){return O(e,"textColor")}})}),Object(m.jsxs)("div",{className:" text-end col-12 col-lg-4 mt-2 mt-lg-0",children:[Object(m.jsx)("button",{type:"submit",className:"btn btn-success",disabled:b,children:"Zapisz"}),Object(m.jsx)("button",{type:"button",onClick:function(){t.dispatch({type:"showEditModal",showEditModal:!1}),t.dispatch({type:"editNote",currentNote:{}})},className:"btn btn-danger ms-2",children:"Anuluj"})]})]})]})})]})})})})},V={notes:[],copyNotesSearch:[],currentNote:{},showEditModal:!1,showAddNote:!1,auth:window.localStorage.getItem("user-auth")?JSON.parse(window.localStorage.getItem("user-auth")):null},W=function(e,t){switch(t.type){case"addNote":return Object(g.a)(Object(g.a)({},e),{},{notes:[].concat(Object(f.a)(e.notes),[t.note])});case"editNote":return Object(g.a)(Object(g.a)({},e),{},{currentNote:t.note});case"updateNote":case"remove":return Object(g.a)(Object(g.a)({},e),{},{notes:t.notes});case"showEditModal":return Object(g.a)(Object(g.a)({},e),{},{showEditModal:t.showEditModal});case"showAddNote":return Object(g.a)(Object(g.a)({},e),{},{showAddNote:t.showAddNote});case"login":return Object(g.a)(Object(g.a)({},e),{},{auth:t.user});case"logout":return Object(g.a)(Object(g.a)({},e),{},{auth:null});case"searchHandler":return Object(g.a)(Object(g.a)({},e),{},{copyNotesSearch:Object(f.a)(e.notes)});default:return e}};function R(){return Object(m.jsx)("div",{className:"bg-dark text-light p-3 text-center",children:Object(m.jsxs)("p",{className:"m-0 p-0",children:["Copyright  ",Object(m.jsx)("a",{className:"link-success text-decoration-none",href:"https://michalmg.github.io/Portfolio/",children:"MG"})]})})}var Z=a(4),B=y.a.create({baseURL:"https://identitytoolkit.googleapis.com/v1",params:{key:"AIzaSyBIo5AYQnqDuUf7UmL_tvnOdVG1LYfGoIE"}});function U(e){return Object(m.jsx)(m.Fragment,{children:e.loading?Object(m.jsxs)("button",{className:"btn btn-".concat(e.color?e.color:"warning"),type:"button",disabled:!0,children:[Object(m.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"\u0141adowanie..."]}):Object(m.jsx)("button",{onClick:e.onClick?e.onClick:null,type:e.type?e.type:"submit",className:"btn btn-".concat(e.color?e.color:"warning"),disabled:!!e.disabled&&e.disabled,children:e.title})})}function q(){var e=u(),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(Z.g)(),s=Object(n.useState)(!1),r=Object(o.a)(s,2),i=r[0],d=r[1],j=Object(n.useState)({email:{value:"",errorMessage:"",validation:!1,rules:["email"]},password:{value:"",errorMessage:"",validation:!1,rules:["required"]},loginInfo:""}),b=Object(o.a)(j,2),p=b[0],O=b[1],f=2!==Object.values(p).filter((function(e){return e.validation})).length,N=function(e,t){var a=L(p[t].rules,e);O(Object(g.a)(Object(g.a)({},p),{},Object(v.a)({},t,Object(g.a)(Object(g.a)({},p[t]),{},{value:e,errorMessage:a,validation:!a}))))},y=function(){var e=Object(w.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!0),e.prev=2,e.next=5,B.post("accounts:signInWithPassword",{email:p.email.value,password:p.password.value,returnSecureToken:!0});case 5:n=e.sent,a({idToken:n.data.idToken,email:n.data.email,localId:n.data.localId}),h({title:"U\u017cytkownik zosta\u0142 zalogowany",message:"Sesja trwa 60 minut",type:"success"}),c.push("/"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0.response.data.error.message),"EMAIL_NOT_FOUND"===e.t0.response.data.error.message?O(Object(g.a)(Object(g.a)({},p),{},{loginInfo:"Nie znaleziono maila"})):"INVALID_PASSWORD"===e.t0.response.data.error.message?O(Object(g.a)(Object(g.a)({},p),{},{loginInfo:"Nieprawid\u0142owe has\u0142o"})):e.t0.response.data.error.message.includes("TOO_MANY_ATTEMPTS_TRY_LATER")?O(Object(g.a)(Object(g.a)({},p),{},{loginInfo:"Z powodu zbyt du\u017cej ilo\u015bci pr\xf3b zalogowania zako\u0144czonych niepowodzeniem, konto zostaje chwilowo zablokowane. Spr\xf3buj p\xf3\u017aniej"})):O(Object(g.a)(Object(g.a)({},p),{},{loginInfo:"Problemy z zalogowaniem"})),d(!1);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container col-12 col-md-8 col-lg-6 col-xxl-4 mt-5",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-light",children:"Zaloguj si\u0119!"}),Object(m.jsxs)("div",{className:"card-body",children:[p.loginInfo?Object(m.jsx)("div",{className:"alert alert-danger",children:p.loginInfo}):null,Object(m.jsxs)("form",{onSubmit:y,children:[Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"E-mail",type:"email",id:"emailInput",validation:p.email.errorMessage,value:p.email.value,onChange:function(e){return N(e,"email")}})}),Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"Has\u0142o",type:"password",id:"passwordInput",value:p.password.value,validation:p.password.errorMessage,onChange:function(e){return N(e,"password")}})}),Object(m.jsx)(U,{loading:i,disabled:f,title:"Zaloguj"})]})]}),Object(m.jsxs)("div",{className:"card-footer",children:["Nie posiadasz jeszcze konta ? ",Object(m.jsx)(l.b,{to:"/register",children:"Zarejestruj si\u0119!"})]})]})})}var K=function(){var e=u(),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({bgColor:{value:"#ffc107",validation:!0},textColor:{value:"#000000",validation:!0},title:{value:"",errorMessage:"",validation:!1,rules:["required",{rule:"length",length:2}]},description:{value:"",errorMessage:"",validation:!1,rules:["required"]}}),r=Object(o.a)(s,2),l=r[0],i=r[1],d=!!Object.values(l).filter((function(e){return!e.validation})).length,j=Object(n.useContext)(z),b=function(){var e=Object(w.a)(x.a.mark((function e(t){var n,s,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={title:l.title.value,body:l.description.value,bgColor:l.bgColor.value,textColor:l.textColor.value,localId:a.localId},e.next=5,k.post("/".concat(a.localId,".json?auth=").concat(a.idToken),n);case 5:s=e.sent,r=Object(g.a)(Object(g.a)({},n),{},{_id:s.data.name}),j.dispatch({type:"addNote",note:r}),j.dispatch({type:"showAddNote",showAddNote:!1}),j.dispatch({type:"searchHandler"}),h({title:"Notatka zsota\u0142a dodana.",message:"Nowa notatka jest ju\u017c widoczna",type:"success"}),e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(1),h({title:"Sesja wygas\u0142a!",message:"Aby doda\u0107 notatk\u0119 prosz\u0119 si\u0119 zalogowa\u0107",type:"warning"}),e.abrupt("return",c(null));case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e,t){var a=L(l[t].rules,e);i(Object(g.a)(Object(g.a)({},l),{},Object(v.a)({},t,Object(g.a)(Object(g.a)({},l[t]),{},{value:e,errorMessage:a,validation:!a}))))};return Object(m.jsx)(D,{children:Object(m.jsx)("div",{className:"my-4",children:Object(m.jsx)("div",{className:"row justify-content-center",children:Object(m.jsxs)("div",{className:"card bg-light text-dark col-sm-8 p-0",children:[Object(m.jsx)("div",{className:"card-header",children:"Dodaj notatk\u0119"}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("form",{onSubmit:b,children:[Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{type:"text",validation:l.title.errorMessage,id:"newNoteTitle",value:l.title.value,onChange:function(e){return p(e,"title")},label:"Tytu\u0142"})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(C,{type:"textarea",label:"Notatka",validation:l.description.errorMessage&&"Tre\u015b\u0107 notatki jest wymagana",onChange:function(e){return p(e,"description")}})}),Object(m.jsxs)("div",{className:"row align-items-center",children:[Object(m.jsx)("div",{className:"col-6 col-lg-4",children:Object(m.jsx)(C,{type:"color",label:"Kolor notatki",title:"Wybierz kolor",value:l.bgColor.value,onChange:function(e){return p(e,"bgColor")}})}),Object(m.jsx)("div",{className:"col-6 col-lg-4",children:Object(m.jsx)(C,{type:"color",label:"Kolor tekstu",title:"Wybierz kolor",value:l.textColor.value,onChange:function(e){return p(e,"textColor")}})}),Object(m.jsxs)("div",{className:"text-end col-12 col-lg-4 mt-2 mt-lg-0",children:[Object(m.jsx)("button",{type:"submit",className:"btn btn-success ",disabled:d,children:"Dodaj"}),Object(m.jsx)("button",{type:"button",onClick:function(){return j.dispatch({type:"showAddNote",showAddNote:!1})},className:"btn btn-danger ms-2",children:"Anuluj"})]})]})]})})]})})})})};var G=function(e){return Object(m.jsx)("div",{className:"col-12 col-md-6 col-lg-4 mb-2",children:Object(m.jsxs)("div",{className:"card ",style:{backgroundColor:e.bgColor,color:e.textColor},children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsxs)("div",{className:"row align-items-center",children:[Object(m.jsxs)("div",{className:"col-9",children:[" ",Object(m.jsx)("em",{children:e.title})," "]}),Object(m.jsxs)("div",{className:"ms-auto col-3 p-0 text-center",children:[Object(m.jsx)("span",{children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer"},onClick:function(){return e.onEdit(e._id)},width:"22",height:"22",fill:"currentColor",className:"bi bi-pencil-square",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),Object(m.jsx)("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})]})}),Object(m.jsx)("span",{className:"ms-2",style:{cursor:"pointer"},onClick:function(){return e.onRemove(e._id)},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",className:"bi bi-trash-fill",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"})})})]})]})}),Object(m.jsx)("div",{className:"card-body",children:e.body})]})})};var J=function(e){return Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row justify-content-center",children:e.notes.map((function(t){return Object(m.jsx)(G,Object(g.a)({onRemove:e.onRemove,onEdit:e.onEdit},t),t._id)}))})})};function Y(e){return e.loading?Object(m.jsxs)("div",{className:"container my-3 d-flex align-items-center justify-content-center",children:[Object(m.jsx)("div",{className:"spinner-border text-success text-center",role:"status"}),Object(m.jsx)("span",{className:"ml-2",children:" \u0141adowanie..."})]}):null}var X=function(e){var t=[];for(var a in e)t.push(Object(g.a)(Object(g.a)({},e[a]),{},{_id:a}));return t};function Q(){var e=Object(n.useContext)(z),t=u(),a=Object(o.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(!1),l=Object(o.a)(r,2),i=l[0],d=l[1],j=Object(n.useState)(""),b=Object(o.a)(j,2),p=b[0],v=b[1],O=Object(n.useState)(""),g=Object(o.a)(O,2),N=g[0],y=g[1],C=function(){var t=Object(w.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.delete("/".concat(c.localId,"/").concat(a,".json?auth=").concat(c.idToken));case 3:n=(n=Object(f.a)(e.state.notes)).filter((function(e){return e._id!==a})),e.dispatch({type:"remove",notes:n}),e.dispatch({type:"searchHandler"}),h({title:"Notatka zsota\u0142a usuni\u0119ta.",message:"Nie ma mo\u017cliwo\u015bci przywr\xf3cenia usuni\u0119tej notatki",type:"danger"}),t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),h({title:"Sesja wygas\u0142a!",message:"Aby usun\u0105\u0107 notatk\u0119 prosz\u0119 si\u0119 zalogowa\u0107",type:"warning"}),t.abrupt("return",s(null));case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(w.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(f.a)(e.state.notes).filter((function(e){return e._id===a})),e.dispatch({type:"editNote",note:n}),e.dispatch({type:"showEditModal",showEditModal:!0}),e.dispatch({type:"searchHandler"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(w.a)(x.a.mark((function t(){var a,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.get("/".concat(c.localId,".json"));case 3:a=t.sent,n=X(a.data),e.dispatch({type:"updateNote",notes:n}),v(""),e.dispatch({type:"searchHandler"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),v("Wyst\u0105pi\u0142 problem z serwerem. Prosz\u0119 od\u015bwie\u017cy\u0107 stron\u0119, je\u015bli rezultat b\u0119dzie taki sam to bardzo prosz\u0119 o pilny kontakt"+t.t0),console.log(t.t0.data);case 14:d(!1);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(w.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{y(a.target.value),n=(n=Object(f.a)(e.state.copyNotesSearch)).filter((function(e){return e.title.toLowerCase().includes(a.target.value.toLowerCase())})),e.dispatch({type:"updateNote",notes:n})}catch(c){console.log(c.response.data)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){c&&(d(!0),I())}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:" my-4 container d-flex justify-content-center align-items-center",children:[Object(m.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){return e.dispatch({type:"showAddNote",showAddNote:!0})},children:"Dodaj!"}),Object(m.jsx)("div",{className:"ms-2",children:Object(m.jsx)("input",{type:"text",className:"form-control",placeholder:"wyszukaj...",value:N,onChange:A})})]}),p?Object(m.jsx)("div",{className:"container alert alert-danger",children:p}):null,i?Object(m.jsx)(Y,{loading:i}):Object(m.jsx)(J,{onRemove:C,onEdit:M,notes:e.state.notes})]}),e.state.showAddNote?Object(m.jsx)(K,{}):null]})}a(84);function $(e){var t=e.header,a=e.content,n=e.footer,c=e.modal;return Object(m.jsxs)("div",{className:"d-flex flex-column wrapperLayout",children:[Object(m.jsx)("div",{children:t}),Object(m.jsx)("div",{style:{flexGrow:"2"},children:a}),Object(m.jsx)("div",{children:c}),Object(m.jsx)("div",{className:"pt-3",children:n})]})}function ee(){var e=Object(Z.g)(),t=u(),a=Object(o.a)(t,2),c=(a[0],a[1]),s=Object(n.useState)(!1),r=Object(o.a)(s,2),i=r[0],d=r[1],j=Object(n.useState)({email:{value:"",errorMessage:"",validation:!1,rules:["email"]},password:{value:"",errorMessage:"",validation:!1,rules:["password"]},checkbox:{value:"",errorMessage:"",validation:!1,rules:["checkbox"]},validationMessage:""}),b=Object(o.a)(j,2),p=b[0],O=b[1],f=3!==Object.values(p).filter((function(e){return e.validation})).length,N=function(e,t){var a,n=L(p[t].rules,e);O(Object(g.a)(Object(g.a)({},p),{},(a={},Object(v.a)(a,t,Object(g.a)(Object(g.a)({},p[t]),{},{value:e,errorMessage:n,validation:!n})),Object(v.a)(a,"validationMessage",""),a)))},y=function(){var t=Object(w.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),d(!0),t.prev=2,t.next=5,B.post("accounts:signUp",{email:p.email.value,password:p.password.value,returnSecureToken:!0});case 5:return n=t.sent,t.next=8,k.post("/".concat(n.data.localId,".json?auth=").concat(n.data.idToken),{title:"Witaj w \u015bwiecie notatek",body:"W \u0142atwy i szybki spos\xf3b mo\u017cesz tworzy\u0107, usuwa\u0107 oraz edytowa\u0107 notatki",bgColor:"#ffc107",textColor:"#000000",localId:n.data.localId});case 8:c({idToken:n.data.idToken,email:n.data.email,localId:n.data.localId}),h({title:"U\u017cytkownik zosta\u0142 zarejestrowany",message:"Zalogowano na konto",type:"success"}),e.push("/"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),"EMAIL_EXISTS"===t.t0.response.data.error.message?O(Object(g.a)(Object(g.a)({},p),{},{validationMessage:"Taki adres email istnieje ju\u017c w bazie"})):O(Object(g.a)(Object(g.a)({},p),{},{validationMessage:"Wyst\u0105pi\u0142 problem z rejestracj\u0105! Spr\xf3buj jeszcze raz"})),d(!1);case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container col-12 col-md-8 col-lg-6 col-xxl-4 mt-5",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header bg-dark text-light",children:"Zarejestruj si\u0119!"}),Object(m.jsxs)("div",{className:"card-body",children:[p.validationMessage&&Object(m.jsx)("div",{className:"alert alert-danger",children:p.validationMessage}),Object(m.jsxs)("form",{onSubmit:y,children:[Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"E-mail",type:"email",id:"emailInput",validation:p.email.errorMessage,value:p.email.value,onChange:function(e){return N(e,"email")}})}),Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"Has\u0142o",placeholder:"wpisz has\u0142o",type:"password",id:"passwordInput",value:p.password.value,validation:p.password.errorMessage,onChange:function(e){return N(e,"password")}})}),Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"Akceptuj\u0119 regulamin ...",type:"checkbox",id:"checkboxInput",checked:p.checkbox.value,validation:p.checkbox.errorMessage,onChange:function(e){return N(e,"checkbox")}})}),Object(m.jsx)(U,{loading:i,disabled:f,title:"Zarejestruj"})]})]}),Object(m.jsxs)("div",{className:"card-footer",children:["Posiadasz ju\u017c konto ? ",Object(m.jsx)(l.b,{to:"/login",children:"Zaloguj si\u0119!"})]})]})})}function te(e){var t=u();return Object(o.a)(t,1)[0]?Object(m.jsx)(Z.b,Object(g.a)({},e)):Object(m.jsx)(Z.a,{to:"/login"})}function ae(e){var t=u();return Object(o.a)(t,1)[0]?Object(m.jsx)(Z.a,{to:"/"}):Object(m.jsx)(Z.b,Object(g.a)({},e))}function ne(){var e=u(),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),r=Object(o.a)(s,2),i=r[0],d=r[1],j=Object(Z.g)(),b=Object(n.useState)(!1),p=Object(o.a)(b,2),O=p[0],f=p[1],N=Object(n.useState)({email:{value:"",errorMessage:"",validation:!1,rules:["email"]},password:{value:"",errorMessage:"",validation:!0,rules:["changePassword"]},loginInfo:""}),y=Object(o.a)(N,2),z=y[0],M=y[1],I=2!==Object.values(z).filter((function(e){return e.validation})).length,A=function(e,t){var a=L(z[t].rules,e);M(Object(g.a)(Object(g.a)({},z),{},Object(v.a)({},t,Object(g.a)(Object(g.a)({},z[t]),{},{value:e,errorMessage:a,validation:!a}))))},S=function(){var e=Object(w.a)(x.a.mark((function e(t){var n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!0),n={idToken:a.idToken,email:z.email.value,returnSecureToken:!0},z.password.value&&(n.password=z.password.value,console.log(z.password.value)),console.log(n),e.prev=5,e.next=8,B.post("/accounts:update/",n);case 8:s=e.sent,console.log(s.data),c({idToken:s.data.idToken,email:s.data.email,localId:s.data.localId}),h({title:"Aktualizacja danych.",message:"Dane u\u017cytkownika zosta\u0142y zaktualizowane",type:"success"}),j.push("/"),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0.response.data.error.message),"EMAIL_EXISTS"===e.t0.response.data.error.message?M(Object(g.a)(Object(g.a)({},z),{},{loginInfo:"Taki mail ju\u017c istnieje"})):"CREDENTIAL_TOO_OLD_LOGIN_AGAIN"===e.t0.response.data.error.message||"INVALID_ID_TOKEN"===e.t0.response.data.error.message||"TOKEN_EXPIRED"===e.t0.response.data.error.message?M(Object(g.a)(Object(g.a)({},z),{},{loginInfo:"Wyst\u0105pi\u0142 b\u0142\u0105d z kontem. Prosz\u0119 wylogowa\u0107 i zalogowa\u0107 si\u0119 ponownie"})):M(Object(g.a)(Object(g.a)({},z),{},{loginInfo:"Problemy z aktualizacj\u0105. Prosz\u0119 o kontakt z administratorem"})),f(!1);case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,k.delete("/".concat(a.localId,".json?auth=").concat(a.idToken));case 4:return e.next=6,B.post("/accounts:delete",{idToken:a.idToken});case 6:h({title:"Konto zosta\u0142o usuni\u0119te",message:" ",type:"warning"}),f(!1),c(null),j.push("/"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),h({title:"Wyst\u0105pi\u0142y problemy z serwerem",message:"Bardzo prosz\u0119 zalogowa\u0107 si\u0119 i spr\xf3bowa\u0107 ponownie.",type:"warning"}),c(null);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"container text-center col-12 col-md-8 col-lg-6 col-xxl-4 my-4 ",children:[Object(m.jsx)("h3",{children:"Tw\xf3j profil"}),Object(m.jsx)("p",{className:"text-muted mb-0",children:"Mo\u017cesz tutaj zaktualizowa\u0107 swoje dane logowania oraz usun\u0105\u0107 konto."}),Object(m.jsx)("p",{className:"text-muted mb-0",children:"Je\u015bli chcesz zmieni\u0107 maila to wpisz nowego maila i kliknij aktualizuj, "}),Object(m.jsx)("p",{className:"text-muted",children:"przy zmianie has\u0142a konieczne jest podanie aktualnego maila"}),z.loginInfo?Object(m.jsx)("div",{className:"alert alert-danger",children:z.loginInfo}):null,Object(m.jsxs)("form",{onSubmit:S,className:"text-start",children:[Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"E-mail",type:"email",id:"emailInput",placeholder:a.email,validation:z.email.errorMessage,value:z.email.value,onChange:function(e){return A(e,"email")}})}),Object(m.jsx)("div",{className:"mb-3 ",children:Object(m.jsx)(C,{label:"Has\u0142o",type:"password",id:"passwordInput",value:z.password.value,validation:z.password.errorMessage,onChange:function(e){return A(e,"password")}})}),Object(m.jsx)(U,{color:"success",loading:O,disabled:I,title:"Aktualizuj"}),Object(m.jsx)(l.b,{to:"/",className:"btn btn-outline-secondary ms-2",children:"Wr\xf3\u0107 do notatek"})]}),Object(m.jsxs)("div",{className:"card-footer mt-4 text-muted d-flex flex-column align-items-center justify-content-center",children:[Object(m.jsx)("span",{children:"W ka\u017cdej chwili mo\u017cesz te\u017c usun\u0105\u0107 konto."}),Object(m.jsx)("button",{onClick:function(){return d(!0)},className:"btn btn-link link-danger ms-1 p-0 shadow-none",children:"Kliknij i usu\u0144 konto"}),i?Object(m.jsx)(D,{children:Object(m.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Usuwanie konta"}),Object(m.jsx)("button",{type:"button",className:"btn-close",onClick:function(){return d(!1)}})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("p",{className:"card-text mb-0",children:"Czy jeste\u015b pewien, \u017ce chcesz usun\u0105\u0107 konto?"}),Object(m.jsx)("p",{className:"card-text",children:"Operacja jest nieodwracalna."})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(U,{type:"button",color:"danger",title:"Potwierdzam",onClick:T,loading:O}),Object(m.jsx)("button",{onClick:function(){return d(!1)},className:"btn btn-secondary ms-2",children:"Rezygnuj\u0119"})]})]})})})}):null]})]})}a(85),a(86);var ce=function(){var e=Object(n.useReducer)(W,V),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(m.jsx)(p,{}),r=Object(m.jsx)(R,{}),i=a.showEditModal?Object(m.jsx)(P,{}):null,u=Object(m.jsxs)(Z.d,{children:[Object(m.jsx)(ae,{path:"/register",component:ee}),Object(m.jsx)(ae,{path:"/login",component:q}),Object(m.jsx)(te,{path:"/profile",component:ne}),Object(m.jsx)(te,{exact:!0,path:"/",component:Q}),Object(m.jsx)(Z.b,{component:function(){return Object(m.jsx)("div",{className:"container alert alert-danger mt-5",children:Object(m.jsx)("h1",{children:"B\u0142\u0105d 404- nie znaleziono strony"})})}})]});return Object(m.jsx)(z.Provider,{value:{state:a,dispatch:c},children:Object(m.jsx)(d.Provider,{value:{auth:a.auth,login:function(e){return c({type:"login",user:e})},logout:function(){return c({type:"logout"})}},children:Object(m.jsxs)(l.a,{children:[Object(m.jsx)(b.a,{}),Object(m.jsx)($,{header:s,content:u,footer:r,modal:i})]})})})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,88)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(ce,{})}),document.getElementById("root")),se()}},[[87,1,2]]]);
//# sourceMappingURL=main.08eab138.chunk.js.map